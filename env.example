# ==============================================================================
# NovoLogic Auth Service â€” env.example
# Copy to `.env` (for local) or set as environment variables in your runtime.
# All variables below map to `src/shared/config/config.factory.ts`.
# ==============================================================================

# ------------------------------------------------------------------------------
# Runtime / App
# ------------------------------------------------------------------------------
NODE_ENV=development               # development | test | production
APP_NAME=novo-core
PORT=3000
GLOBAL_PREFIX=

# ------------------------------------------------------------------------------
# Logging
# ------------------------------------------------------------------------------
LOG_LEVEL=info                     # trace|debug|info|warn|error|fatal|silent
LOG_PRETTY=true                    # pretty-print logs in dev (true|false)

# ------------------------------------------------------------------------------
# Domains & URLs
# ------------------------------------------------------------------------------
# Public base URL of the auth service (used for links, redirects)
# For this deployment we serve auth from api.novologic.co (you can point a CNAME like auth.novologic.co here later).
PUBLIC_BASE_URL=https://api.novologic.co
# OIDC issuer URL (usually equals PUBLIC_BASE_URL)
ISSUER_URL=https://api.novologic.co

# ------------------------------------------------------------------------------
# Cookies (used for OP session + refresh token cookie for first-party apps)
# ------------------------------------------------------------------------------
COOKIE_DOMAIN=.novologic.co
COOKIE_SECURE=true                 # true in prod (HTTPS); false for local dev over HTTP
COOKIE_SAMESITE=lax                # lax | strict | none

# ------------------------------------------------------------------------------
# CORS
# ------------------------------------------------------------------------------
# Comma-separated list of allowed origins (sandbox2 + apps + local dev)
CORS_ORIGINS=http://localhost:3000,http://localhost:4200,https://sandbox2.novologic.co,https://app.novologic.co,https://invoice.novologic.co
CORS_CREDENTIALS=true              # allow cookies/credentials over CORS

# ------------------------------------------------------------------------------
# Database (PostgreSQL)
# ------------------------------------------------------------------------------
DB_HOST=localhost
DB_PORT=5432
DB_NAME=novologic
DB_USER=postgres
DB_PASSWORD=postgres
DB_SSL=false                       # true in production if using TLS to DB
DB_MIGRATIONS_RUN=false            # set true once to auto-run migrations on startup

# ------------------------------------------------------------------------------
# Throttling (optional; currently hardcoded in app.module)
# ------------------------------------------------------------------------------
# THROTTLE_TTL_MS=60000
# THROTTLE_LIMIT=100

# ------------------------------------------------------------------------------
# Key Management (optional; default is in-memory JWKs in CryptoModule)
# ------------------------------------------------------------------------------
# KEY_PROVIDER=memory              # memory | aws-kms | gcp-kms | azure-keyvault
# AWS_REGION=
# AWS_KMS_KEY_ID=

# ------------------------------------------------------------------------------
# Tokens (optional; defaults in code)
# ------------------------------------------------------------------------------
# ACCESS_TOKEN_TTL=300s            # 5m
# REFRESH_TOKEN_TTL=2592000s       # 30d

# ------------------------------------------------------------------------------
# Notes
# - For local dev over http://localhost, set:
#     COOKIE_SECURE=false
#     CORS_ORIGINS to include your local frontends
# - After copying to `.env`, run `npm run start:dev` or your chosen process manager.
# - For production, set secure values for DB_PASSWORD and switch LOG_PRETTY=false.


